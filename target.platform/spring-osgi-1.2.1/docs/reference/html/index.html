<html><head>
      <meta http-equiv="Content-Type" content="text/html; charset=ISO-8859-1">
   <title>Spring Dynamic Modules Reference Guide</title><link rel="stylesheet" href="css/html.css" type="text/css"><meta name="generator" content="DocBook XSL Stylesheets V1.72.0"><link rel="start" href="index.html" title="Spring Dynamic Modules Reference Guide"><link rel="next" href="preface.html" title="Preface"></head><body bgcolor="white" text="black" link="#0000FF" vlink="#840084" alink="#0000FF"><div xmlns:fo="http://www.w3.org/1999/XSL/Format" style="background-color:white;border:none;height:73px;border:1px solid black;"><a style="border:none;" href="http://www.springframework.org/osgi/" title="The Spring Framework - Spring Dynamic Modules"><img style="border:none;" src="images/xdev-spring_logo.jpg"></a><a style="border:none;" href="http://www.SpringSource.com/" title="SpringSource - Spring from the Source"><img style="border:none;position:absolute;padding-top:5px;right:42px;" src="images/s2-banner-rhs.png"></a></div><div class="book" lang="en"><div class="titlepage"><div><div><h1 class="title"><a name="d18e1"></a>Spring Dynamic Modules Reference Guide</h1></div><div><div xmlns:fo="http://www.w3.org/1999/XSL/Format" class="authorgroup"><h2>Authors</h2><p></p><span class="author"><span class="firstname">Adrian M</span> <span class="surname">Colyer</span> 
            (SpringSource)
            </span>, <span class="author"><span class="firstname">Hal</span> <span class="surname">Hildebrand</span> 
            (Oracle)
            </span>, <span class="author"><span class="firstname">Costin</span> <span class="surname">Leau</span> 
            (SpringSource)
            </span>, <span class="author"><span class="firstname">Andy</span> <span class="surname">Piper</span> 
            (BEA)
            </span></div></div><div><p class="releaseinfo">1.2.1</p></div><div><div class="legalnotice"><a name="d18e39"></a><p>Copies of this document may be made for your own use and for
      distribution to others, provided that you do not charge any fee for such
      copies and further provided that each copy contains this Copyright
      Notice, whether distributed in print or electronically.</p></div></div></div><hr></div><div class="toc"><dl><dt><span class="preface"><a href="preface.html">Preface</a></span></dt><dt><span class="part"><a href="introduction.html">I. Introduction</a></span></dt><dd><dl><dt><span class="chapter"><a href="why-Spring DM.html">1. Why Spring Dynamic Modules?</a></span></dt><dt><span class="chapter"><a href="requirements.html">2. Requirements</a></span></dt><dt><span class="chapter"><a href="get-started.html">3. Getting Started</a></span></dt><dd><dl><dt><span class="section"><a href="get-started.html#get-started:first-steps">3.1. First Steps</a></span></dt><dd><dl><dt><span class="section"><a href="get-started.html#get-started:first-steps:spring">3.1.1. Knowing Spring</a></span></dt><dt><span class="section"><a href="get-started.html#get-started:first-steps:osgi">3.1.2. Knowing OSGi</a></span></dt><dt><span class="section"><a href="get-started.html#get-started:first-steps:samples">3.1.3. Trying Out The Samples</a></span></dt></dl></dd><dt><span class="section"><a href="get-started.html#get-started:help">3.2. Need Help?</a></span></dt><dd><dl><dt><span class="section"><a href="get-started.html#get-started:help:community">3.2.1. Community Support</a></span></dt><dt><span class="section"><a href="get-started.html#get-started:help:professional">3.2.2. Professional Support</a></span></dt></dl></dd><dt><span class="section"><a href="get-started.html#get-started:up-to-date">3.3. Following Development</a></span></dt></dl></dd><dt><span class="chapter"><a href="what-is-new.html">4. What is new?</a></span></dt><dd><dl><dt><span class="section"><a href="what-is-new.html#dm-1.2.x">4.1. 1.2.x</a></span></dt><dd><dl><dt><span class="section"><a href="what-is-new.html#dm-1.2.x:security">4.1.1. Java 2 Security Integration</a></span></dt><dt><span class="section"><a href="what-is-new.html#dm-1.2.x:compendium">4.1.2. Compendium Services Support</a></span></dt><dt><span class="section"><a href="what-is-new.html#dm-1.2.x:sym-name-change">4.1.3. Changed Spring DM Symbolic Names</a></span></dt><dt><span class="section"><a href="what-is-new.html#dm-1.2.x:ebr-usage">4.1.4. Usage of SpringSource Enterprise Bundle Repository (EBR)</a></span></dt></dl></dd><dt><span class="section"><a href="what-is-new.html#dm-1.1.x">4.2. 1.1.x</a></span></dt><dd><dl><dt><span class="section"><a href="what-is-new.html#dm-1.1.x:web">4.2.1. Web Support</a></span></dt><dd><dl><dt><span class="section"><a href="what-is-new.html#dm-1.1.x:web:spring-mvc">4.2.1.1. Spring-MVC Integration</a></span></dt></dl></dd><dt><span class="section"><a href="what-is-new.html#dm-1.1.x:io">4.2.2. Classpath Resource Abstraction</a></span></dt><dt><span class="section"><a href="what-is-new.html#dm-1.1.x:configuration">4.2.3. Pluggable Extender Configuration</a></span></dt><dt><span class="section"><a href="what-is-new.html#dm-1.1.x:improved-class-loading">4.2.4. Improved Class Loading</a></span></dt></dl></dd></dl></dd></dl></dd><dt><span class="part"><a href="reference.html">II. Reference Documentation</a></span></dt><dd><dl><dt><span class="chapter"><a href="bnd-app-ctx.html">5. Bundles and Application Contexts</a></span></dt><dd><dl><dt><span class="section"><a href="bnd-app-ctx.html#bnd-app-ctx:extender">5.1. The Spring Dynamic Modules Extender bundle</a></span></dt><dt><span class="section"><a href="bnd-app-ctx.html#bnd-app-ctx:app-creation">5.2. Application Context Creation</a></span></dt><dd><dl><dt><span class="section"><a href="bnd-app-ctx.html#bnd-app-ctx:app-creation:mandatory-deps">5.2.1. Mandatory Service Dependencies</a></span></dt><dt><span class="section"><a href="bnd-app-ctx.html#bnd-app-ctx:app-creation:app-ctx-publication">5.2.2. Application Context Service Publication</a></span></dt></dl></dd><dt><span class="section"><a href="bnd-app-ctx.html#bnd-app-ctx:bnd-lifecycle">5.3. Bundle Lifecycle</a></span></dt><dt><span class="section"><a href="bnd-app-ctx.html#bnd-app-ctx:osgi-resource">5.4. The Resource Abstraction</a></span></dt><dt><span class="section"><a href="bnd-app-ctx.html#bnd-app-ctx:access-bnd-ctx">5.5. Accessing the BundleContext</a></span></dt><dt><span class="section"><a href="bnd-app-ctx.html#bnd-app-ctx:app-destruction">5.6. Application Context Destruction</a></span></dt><dt><span class="section"><a href="bnd-app-ctx.html#bnd-app-ctx:access-bnd-ctx:stop-extender">5.7. Stopping the Extender Bundle</a></span></dt></dl></dd><dt><span class="chapter"><a href="app-deploy.html">6. Packaging and Deploying Spring-based OSGi applications</a></span></dt><dd><dl><dt><span class="section"><a href="app-deploy.html#app-deploy:headers">6.1. Bundle Format And Manifest Headers</a></span></dt><dt><span class="section"><a href="app-deploy.html#app-deploy:extender-configuration">6.2. Extender Configuration Options</a></span></dt><dd><dl><dt><span class="section"><a href="app-deploy.html#app-deploy:extender-configuration:events">6.2.1. Listening To Extender Events</a></span></dt></dl></dd><dt><span class="section"><a href="app-deploy.html#app-deploy:required-libraries">6.3. Required Spring Framework And Spring Dynamic Modules
      Bundles</a></span></dt><dt><span class="section"><a href="app-deploy.html#app-deploy:spring-namespaces">6.4. Spring XML Authoring Support</a></span></dt><dt><span class="section"><a href="app-deploy.html#app-deploy:imports-exports">6.5. Importing and Exporting Packages</a></span></dt><dt><span class="section"><a href="app-deploy.html#app-deploy:ext-libs">6.6. Considerations When Using External Libraries</a></span></dt><dt><span class="section"><a href="app-deploy.html#app-deploy:troubleshooting">6.7. Diagnosing Problems</a></span></dt></dl></dd><dt><span class="chapter"><a href="service-registry.html">7. The Service Registry</a></span></dt><dd><dl><dt><span class="section"><a href="service-registry.html#service-registry:export">7.1. Exporting A Spring Bean As An OSGi Service</a></span></dt><dd><dl><dt><span class="section"><a href="service-registry.html#service-registry:export:intfs">7.1.1. Controlling The Set Of Advertised Service Interfaces For
        An Exported Service</a></span></dt><dd><dl><dt><span class="section"><a href="service-registry.html#service-registry:export:auto-export">7.1.1.1. Detecting The Advertised Interfaces At Runtime</a></span></dt></dl></dd><dt><span class="section"><a href="service-registry.html#service-registry:export:props">7.1.2. Controlling The Set Of Advertised Properties For An
        Exported Service</a></span></dt><dt><span class="section"><a href="service-registry.html#service-registry:export:depends-on">7.1.3. The depends-on Attribute</a></span></dt><dt><span class="section"><a href="service-registry.html#service-registry:export:ccl">7.1.4. The context-class-loader Attribute</a></span></dt><dt><span class="section"><a href="service-registry.html#service-registry:export:ranking">7.1.5. The ranking Attribute</a></span></dt><dt><span class="section"><a href="service-registry.html#service-registry:export:service:attributes">7.1.6. <code class="literal">service</code> Element Attributes</a></span></dt><dt><span class="section"><a href="service-registry.html#service-registry:export:lifecycle">7.1.7. Service Registration And Unregistration Lifecycle</a></span></dt><dd><dl><dt><span class="section"><a href="service-registry.html#service-registry:export:lifecycle:interface">7.1.7.1. Using <code class="interfacename">OsgiServiceRegistrationListener</code> Interface</a></span></dt></dl></dd></dl></dd><dt><span class="section"><a href="service-registry.html#service-registry:refs">7.2. Defining References To OSGi Services</a></span></dt><dd><dl><dt><span class="section"><a href="service-registry.html#service-registry:refs:singular">7.2.1. Referencing An Individual Service</a></span></dt><dd><dl><dt><span class="section"><a href="service-registry.html#service-registry:refs:singular:interface">7.2.1.1. Controlling The Set Of Advertised Interfaces For The Imported Service</a></span></dt><dt><span class="section"><a href="service-registry.html#service-registry:refs:singular:filter">7.2.1.2. The <code class="literal">filter</code> Attribute</a></span></dt><dt><span class="section"><a href="service-registry.html#service-registry:refs:singular:bean-name">7.2.1.3. The <code class="literal">bean-name</code> Attribute</a></span></dt><dt><span class="section"><a href="service-registry.html#service-registry:refs:singular:cardinality">7.2.1.4. The <code class="literal">cardinality</code> Attribute</a></span></dt><dt><span class="section"><a href="service-registry.html#service-registry:refs:singular:depends-on">7.2.1.5. The depends-on Attribute</a></span></dt><dt><span class="section"><a href="service-registry.html#service-registry:refs:singular:tccl">7.2.1.6. The context-class-loader Attribute</a></span></dt><dt><span class="section"><a href="service-registry.html#service-registry:refs:singular:reference:attributes">7.2.1.7. <code class="literal">reference</code> Element Attributes</a></span></dt><dt><span class="section"><a href="service-registry.html#service-registry:refs:singular:dynamics">7.2.1.8. <code class="literal">reference</code> And OSGi Service Dynamics</a></span></dt><dt><span class="section"><a href="service-registry.html#service-registry:refs:singular:property-editor">7.2.1.9. Getting A Hold Of The Managed Service Reference</a></span></dt></dl></dd><dt><span class="section"><a href="service-registry.html#service-registry:refs:collection">7.2.2. Referencing A Collection Of Services</a></span></dt><dd><dl><dt><span class="section"><a href="service-registry.html#service-registry:refs:collection:greedy-proxying">7.2.2.1. Greedy Proxying</a></span></dt><dt><span class="section"><a href="service-registry.html#service-registry:refs:collection:attributes">7.2.2.2. Collection (<code class="literal">list</code> And <code class="literal">set</code>) Element Attributes</a></span></dt><dt><span class="section"><a href="service-registry.html#service-registry:refs:collection:dynamics">7.2.2.3. <code class="literal">list</code> / <code class="literal">set</code> And OSGi Service Dynamics</a></span></dt><dt><span class="section"><a href="service-registry.html#service-registry:refs:collection:iterator">7.2.2.4. <code class="interfacename">Iterator</code> Contract And Service Collections</a></span></dt></dl></dd><dt><span class="section"><a href="service-registry.html#service-registry:refs:dynamics">7.2.3. Dealing With The Dynamics Of OSGi Imported Services</a></span></dt><dt><span class="section"><a href="service-registry.html#service-registry:refs:listener-and-proxies">7.2.4. Listener And Service Proxies</a></span></dt><dt><span class="section"><a href="service-registry.html#service-registry:refs:invoker-bundle-context">7.2.5. Accessing The Caller <code class="interfacename">BundleContext</code></a></span></dt></dl></dd><dt><span class="section"><a href="service-registry.html#service-registry:refs:listener-best-practices">7.3. Exporter/Importer Listener Best Practices</a></span></dt><dd><dl><dt><span class="section"><a href="service-registry.html#service-registry:refs:listener-best-practices:cycles">7.3.1. Listener And Cyclic Dependencies</a></span></dt></dl></dd><dt><span class="section"><a href="service-registry.html#service-registry:refs:global-defaults">7.4. Service Importer Global Defaults</a></span></dt><dt><span class="section"><a href="service-registry.html#service-registry:export-import-relationship">7.5. Relationship Between The Service Exporter And Service Importer</a></span></dt></dl></dd><dt><span class="chapter"><a href="bundles.html">8. Working With Bundles</a></span></dt><dt><span class="chapter"><a href="web.html">9. Web Support</a></span></dt><dd><dl><dt><span class="section"><a href="web.html#web:supported-containers">9.1. Supported Web Containers</a></span></dt><dt><span class="section"><a href="web.html#web:usage">9.2. Web Support Usage</a></span></dt><dt><span class="section"><a href="web.html#web:classpath">9.3. WAR Classpath In OSGi</a></span></dt><dd><dl><dt><span class="section"><a href="web.html#web:classpath:static-resources">9.3.1. Static Resources</a></span></dt><dt><span class="section"><a href="web.html#web:classpath:servlets">9.3.2. Servlets</a></span></dt><dt><span class="section"><a href="web.html#web:classpath:jsps">9.3.3. Java Server Pages</a></span></dt><dd><dl><dt><span class="section"><a href="web.html#web:classpath:jsps:taglibs">9.3.3.1. Tag Libraries</a></span></dt></dl></dd></dl></dd><dt><span class="section"><a href="web.html#web:configuration">9.4. Configuring The Web Extender</a></span></dt><dd><dl><dt><span class="section"><a href="web.html#web:configuration:changing-deployer">9.4.1. Changing The War Deployer</a></span></dt></dl></dd><dt><span class="section"><a href="web.html#web:configuration:customizing-deployer">9.5. Customizing The Standard Deployers</a></span></dt><dt><span class="section"><a href="web.html#web:osgi-artifacts">9.6. OSGi-ready Libraries And Web Development</a></span></dt><dd><dl><dt><span class="section"><a href="web.html#web:osgi-artifacts:containers">9.6.1. Deploying Web Containers As OSGi Bundles</a></span></dt><dd><dl><dt><span class="section"><a href="web.html#web:osgi-artifacts:containers:tomcat">9.6.1.1. Tomcat 5.5.x/6.0.x</a></span></dt><dt><span class="section"><a href="web.html#web:osgi-artifacts:containers:jetty">9.6.1.2. Jetty 6.1.8+/6.2.0</a></span></dt></dl></dd><dt><span class="section"><a href="web.html#web:osgi-artifacts:common-libraries">9.6.2. Common Libraries</a></span></dt></dl></dd><dt><span class="section"><a href="web.html#web:spring-mvc">9.7. Spring-MVC Integration</a></span></dt></dl></dd><dt><span class="chapter"><a href="compendium.html">10. Compendium Services</a></span></dt><dd><dl><dt><span class="section"><a href="compendium.html#compendium:cm">10.1. Configuration Admin</a></span></dt><dd><dl><dt><span class="section"><a href="compendium.html#compendium:cm:props">10.1.1. Exposing Configuration Admin Entries As <code class="classname">Properties</code></a></span></dt><dt><span class="section"><a href="compendium.html#compendium:cm:managed-properties">10.1.2. Managed Properties</a></span></dt><dd><dl><dt><span class="section"><a href="compendium.html#compendium:cm:managed-properties:update">10.1.2.1. Configuration Admin Runtime Updates</a></span></dt></dl></dd><dt><span class="section"><a href="compendium.html#compendium:cm:managed-service-factories">10.1.3. Managed Service Factories</a></span></dt><dt><span class="section"><a href="compendium.html#compendium:cm:dict">10.1.4. Direct Access To Configuration Data</a></span></dt></dl></dd></dl></dd><dt><span class="chapter"><a href="testing.html">11. Testing OSGi based Applications</a></span></dt><dd><dl><dt><span class="section"><a href="testing.html#testing:mocks">11.1. OSGi Mocks</a></span></dt><dt><span class="section"><a href="testing.html#testing:integration">11.2. Integration Testing</a></span></dt><dd><dl><dt><span class="section"><a href="testing.html#testing:integration:simple-test">11.2.1. Creating A Simple OSGi Integration Test</a></span></dt><dt><span class="section"><a href="testing.html#testing:integration:provisioning">11.2.2. Installing Test Prerequisites</a></span></dt><dt><span class="section"><a href="testing.html#testing:integration:advanced-topics">11.2.3. Advanced Testing Framework Topics</a></span></dt><dd><dl><dt><span class="section"><a href="testing.html#testing:integration:customize-manifest">11.2.3.1. Customizing The Test Manifest</a></span></dt><dt><span class="section"><a href="testing.html#testing:integration:specify-test-jar-content">11.2.3.2. Customizing Test Bundle Content</a></span></dt><dt><span class="section"><a href="testing.html#testing:integration:understanding-manifest-creator">11.2.3.3. Understanding The <code class="code">MANIFEST.MF</code> Generation</a></span></dt></dl></dd><dt><span class="section"><a href="testing.html#testing:integration:appContext">11.2.4. Creating An OSGi Application Context</a></span></dt><dt><span class="section"><a href="testing.html#testing:integration:specify-platform">11.2.5. Specifying The OSGi Platform To Use</a></span></dt><dt><span class="section"><a href="testing.html#testing:integration:specify-test-wait-time">11.2.6. Waiting For The Test Dependencies</a></span></dt><dt><span class="section"><a href="testing.html#testing:integration:performance">11.2.7. Testing Framework Performance</a></span></dt></dl></dd></dl></dd></dl></dd><dt><span class="part"><a href="resources.html">III. Other Resources</a></span></dt><dd><dl><dt><span class="chapter"><a href="links.html">12. Useful Links</a></span></dt></dl></dd><dt><span class="part"><a href="appendixes.html">IV. Appendixes</a></span></dt><dd><dl><dt><span class="appendix"><a href="appendix-extensions.html">A. Extensions</a></span></dt><dd><dl><dt><span class="section"><a href="appendix-extensions.html#appendix-extensions:annotations">A.1. Annotation-Based Injection</a></span></dt><dd><dl><dt><span class="section"><a href="appendix-extensions.html#appendix-extensions:annotations:enable">A.1.1. Enabling/Disabling Annotation Processing</a></span></dt></dl></dd></dl></dd><dt><span class="appendix"><a href="appendix-security.html">B. Security Integration</a></span></dt><dt><span class="appendix"><a href="appendix-pde-integration.html">C. Eclipse Plug-in Development integration</a></span></dt><dt><span class="appendix"><a href="appendix-archetype.html">D. Spring Dynamic Modules Maven Archetype</a></span></dt><dd><dl><dt><span class="section"><a href="appendix-archetype.html#archetype:generated-content">D.1. Generated Project Features At-A-Glance</a></span></dt></dl></dd><dt><span class="appendix"><a href="appendix-tips.html">E. Useful OSGi tips</a></span></dt><dd><dl><dt><span class="section"><a href="appendix-tips.html#appendix-tips:fragments">E.1. OSGi Fragments</a></span></dt></dl></dd><dt><span class="appendix"><a href="appendix-roadmap.html">F. Roadmap</a></span></dt><dd><dl><dt><span class="section"><a href="appendix-roadmap.html#d18e6241">F.1. Access to Service References for Collections</a></span></dt><dt><span class="section"><a href="appendix-roadmap.html#d18e6255">F.2. Start Level Integration</a></span></dt><dt><span class="section"><a href="appendix-roadmap.html#d18e6282">F.3. Web Library Integration</a></span></dt><dt><span class="section"><a href="appendix-roadmap.html#d18e6287">F.4. ORM/Persistence Support</a></span></dt><dt><span class="section"><a href="appendix-roadmap.html#d18e6300">F.5. OSGi Standards</a></span></dt></dl></dd><dt><span class="appendix"><a href="appendix-osgi-repo.html">G. Spring DM OSGi Repository</a></span></dt><dd><dl><dt><span class="section"><a href="appendix-osgi-repo.html#appendix-osgi-repo:old-repo">G.1. Spring DM Temporary OSGi Repository</a></span></dt><dd><dl><dt><span class="section"><a href="appendix-osgi-repo.html#appendix-osgi-repo:conventions">G.1.1. Repository Conventions</a></span></dt><dt><span class="section"><a href="appendix-osgi-repo.html#appendix-osgi-repo:browsing">G.1.2. Browsing The Repository Content</a></span></dt><dt><span class="section"><a href="appendix-osgi-repo.html#appendix-osgi-repo:maven">G.1.3. Using The Repository With Maven</a></span></dt><dt><span class="section"><a href="appendix-osgi-repo.html#appendix-osgi-repo:ant">G.1.4. Using The Repository With Ant/Ivy</a></span></dt></dl></dd></dl></dd><dt><span class="appendix"><a href="appendix-schema.html">H. Spring Dynamic Modules Schema</a></span></dt><dt><span class="appendix"><a href="appendix-ack.html">I. Acknowledgments</a></span></dt></dl></dd></dl></div></div><div xmlns:fo="http://www.w3.org/1999/XSL/Format" class="navfooter"><hr><table width="100%" summary="Navigation footer"><tr><td width="40%" align="left">&nbsp;</td><td width="20%" align="center">&nbsp;</td><td width="40%" align="right">&nbsp;<a accesskey="n" href="preface.html">Next</a></td></tr><tr><td width="40%" align="left" valign="top">&nbsp;</td><td width="20%" align="center"><span style="color:white;font-size:90%;"><a href="http://www.SpringSource.com/" title="SpringSource - Spring from the Source">Sponsored by SpringSource
                                        </a></span></td><td width="40%" align="right" valign="top">&nbsp;Preface</td></tr></table></div></body></html>